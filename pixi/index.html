<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.3/pixi.min.js"></script>
<script type="module">
import * as coro from 'https://cdn.jsdelivr.net/gh/nasser/ajeeb-coroutines@master/build/coroutines.esm.js'

let app = new PIXI.Application({antialias:false})
PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST;

document.body.appendChild(app.view)

window.onresize = function() {
    app.renderer.resize(window.innerWidth, window.innerHeight)
    app.stage.position = { x:window.innerWidth/2, y:window.innerHeight/2 }
}
window.onresize()

var tex1 = PIXI.Texture.from('tiles/tile_0361.png');
var tex2 = PIXI.Texture.from('tiles/tile_0362.png');

var sprite = new PIXI.Sprite();
sprite.texture = tex1
sprite.anchor.set(.5)
sprite.width = 64;
sprite.height = 64;

app.stage.addChild(sprite);

const sched = new coro.Schedule()

sched.add(function* () {
    while(true) {
        sprite.texture = tex2
        yield* coro.wait(.2)
        sprite.texture = tex1
        yield* coro.wait(.2)
    }
})

sched.add(function* () {
    let t = 0
    while(true) {
        sprite.x = Math.sin(t) * 250
        t += 0.01
        yield
    }
})

function tick() {
    requestAnimationFrame(tick)
    sched.tick()
}
tick()

</script>